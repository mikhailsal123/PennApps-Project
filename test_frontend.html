<!DOCTYPE html>
<html>
<head>
    <title>Frontend Test</title>
</head>
<body>
    <h1>Frontend Test</h1>
    
    <!-- Test elements -->
    <div id="finalMetricsCard" style="display: none;">
        <h3>Final Metrics</h3>
        <div id="finalMetrics"></div>
    </div>
    
    <div id="plotsCard" style="display: none;">
        <h3>Plots</h3>
        <div id="plotContainer"></div>
    </div>
    
    <button onclick="testShowFinalResults()">Test Show Final Results</button>
    <button onclick="testShowPlotsCard()">Test Show Plots Card</button>
    
    <script>
        // Test data
        const testData = {
            is_complete: true,
            final_metrics: {
                final_value: 100040.58,
                total_return_pct: 0.04,
                total_pnl: 40.58,
                sharpe_ratio: 0.163,
                beta: 0.026,
                beta_interpretation: "Very low beta - Portfolio shows little correlation with the market",
                correlation: 0.915,
                volatility_pct: 0.28,
                total_trades: 1,
                final_positions: { "AAPL": 10 },
                hedge_trades_count: 0,
                total_hedge_margin_used: 0,
                hedge_margin_remaining: 50000.0,
                hedge_trades: []
            }
        };
        
        function showFinalResults(data) {
            console.log('showFinalResults called with data:', data);
            if (data.final_metrics) {
                console.log('Final metrics found:', data.final_metrics);
                const finalMetricsCard = document.getElementById('finalMetricsCard');
                const finalMetrics = document.getElementById('finalMetrics');
                console.log('Final metrics card element:', finalMetricsCard);
                
                finalMetrics.innerHTML = `
                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <div style="border: 1px solid #ccc; padding: 10px; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: bold;">$${data.final_metrics.final_value.toLocaleString()}</div>
                            <div>Final Value</div>
                        </div>
                        <div style="border: 1px solid #ccc; padding: 10px; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: bold; color: ${data.final_metrics.total_return_pct >= 0 ? 'green' : 'red'};">
                                ${data.final_metrics.total_return_pct >= 0 ? '+' : ''}${data.final_metrics.total_return_pct}%
                            </div>
                            <div>Total Return</div>
                        </div>
                        <div style="border: 1px solid #ccc; padding: 10px; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: bold; color: ${data.final_metrics.total_pnl >= 0 ? 'green' : 'red'};">
                                $${data.final_metrics.total_pnl.toLocaleString()}
                            </div>
                            <div>Total P&L</div>
                        </div>
                    </div>
                `;
                
                if (finalMetricsCard) {
                    finalMetricsCard.style.display = 'block';
                    console.log('Final metrics card displayed');
                } else {
                    console.error('Final metrics card not found!');
                }
            } else {
                console.error('No final metrics in data');
            }
        }
        
        function showPlotsCard() {
            console.log('showPlotsCard called');
            const plotsCard = document.getElementById('plotsCard');
            console.log('plotsCard element:', plotsCard);
            if (plotsCard) {
                plotsCard.style.display = 'block';
                plotsCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                console.log('Plots card displayed');
            } else {
                console.error('plotsCard element not found!');
            }
        }
        
        function testShowFinalResults() {
            console.log('Testing showFinalResults...');
            showFinalResults(testData);
        }
        
        function testShowPlotsCard() {
            console.log('Testing showPlotsCard...');
            showPlotsCard();
        }
    </script>
</body>
</html>


